---
title: 三星o1o2o3项目随笔
toc: true
date: 2020-01-01 00:00:01
tags: 项目随笔
---

# 项目相关

1. 平台

   高通 sdm439 mm-camera 架构

2. PLM 账号密码 

   登录网址（IE浏览器）：http://myproject.samsungmobile.com

   账号：junwei2

   密码：ZJWzhq1314

# 临时记录

参考wiki 

https://wiki.huaqin.com:8443/pages/viewpage.action?pageId=882442563

https://wiki.huaqin.com:8443/pages/viewpage.action?pageId=896958493

谷歌镜像可以到这个共享网址下拿：smb://10.105.73.94

jira 规范  https://wiki.huaqin.com:8443/pages/viewpage.action?pageId=948934088

XTS 测试报告 https://shimo.im/sheets/6YPCpQpjwc9vD9Qh/MODOC/

jira lable 无法测试/无此问题/确认R已修复/生产问题 

# XTS 问题相关

## CTS 测试

1. 工厂版本测试，正常版本测试只需要测试2颗摄像头，主摄和前摄，测试结果报cameraid 2, 3,4 的一律不看。

2. 如果出现测试过程中，由于某一项卡住，或者timeout 导致测试失败。有可能是没有暴露两颗摄像头给CTS. 可以参考一下修改，编译生成的库libcamera2ndk.so .push 路径：system/lib

   <details>
   <summary>暴露两颗模组给CTS</summary>

   ```c++
   //frameworks/av/camera/ndk/impl/ACameraManager.cpp
   camera_status_t
   ACameraManager::getCameraIdList(ACameraIdList** cameraIdList) {
       Mutex::Autolock _l(mLock);
   
       std::vector<String8> idList;
       CameraManagerGlobal::getInstance().getCameraIdList(&idList);
   
       int numCameras = idList.size();
       ACameraIdList *out = new ACameraIdList;
       if (!out) {
           ALOGE("Allocate memory for ACameraIdList failed!");
           return ACAMERA_ERROR_NOT_ENOUGH_MEMORY;
       }
       //这里强制暴露2颗模组给 CTS
       //Expose two cameras fot CTS tests begin by zangyufei@huaqin.com
       if(numCameras > 2)
       {
           numCameras = 2;
           ALOGE("Expose two cameras numCameras %d",numCameras);
       }
       //Expose two cameras fot CTS tests end by zangyufei@huaqin.com
       out->numCameras = numCameras;
       out->cameraIds = new const char*[numCameras];
       if (!out->cameraIds) {
           ALOGE("Allocate memory for ACameraIdList failed!");
           deleteCameraIdList(out);
           return ACAMERA_ERROR_NOT_ENOUGH_MEMORY;
       }
       for (int i = 0; i < numCameras; i++) {
           const char* src = idList[i].string();
           size_t dstSize = strlen(src) + 1;
           char* dst = new char[dstSize];
           if (!dst) {
               ALOGE("Allocate memory for ACameraIdList failed!");
               deleteCameraIdList(out);
               return ACAMERA_ERROR_NOT_ENOUGH_MEMORY;
           }
           strlcpy(dst, src, dstSize);
           out->cameraIds[i] = dst;
       }
       *cameraIdList = out;
       return ACAMERA_OK;
   }
   ```

   </details>